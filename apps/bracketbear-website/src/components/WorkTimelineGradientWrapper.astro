---
interface Props {
  variant?: "simple" | "detailed";
  fillSection?: boolean;
  fullHeight?: boolean;
}

const {
  variant = "simple",
  fillSection = true,
  fullHeight = false,
} = Astro.props;
---

<div
  class={`retrowave-gradient-wrapper relative w-full overflow-hidden p-1 ${fullHeight ? "h-full" : ""}`}
>
  <!-- Retrowave grid -->
  <div class="retrowave-grid absolute inset-0 -z-20 opacity-40"></div>

  <!-- Retrowave sun glow -->
  <div class="retrowave-sun absolute right-0 bottom-0 left-0 -z-30"></div>

  <!-- Grid lines overlay -->
  <div class="grid-lines absolute inset-0 -z-25 opacity-20"></div>

  <!-- Main background -->
  <div class="retrowave-bg absolute inset-0 -z-40"></div>

  <!-- Neon glows -->
  <div class="neon-glows absolute inset-0 -z-35 opacity-50"></div>

  <slot />
</div>

<style>
  .retrowave-gradient-wrapper {
    isolation: isolate;
    background: rgba(16, 6, 26, 0.9);
    box-shadow: 0 0 40px rgba(236, 72, 153, 0.2);
    position: relative;
  }

  /* Dark background with retrowave gradient */
  .retrowave-bg {
    background: linear-gradient(
      180deg,
      #0f0524 0%,
      #1a0933 40%,
      #311052 70%,
      #3b0f64 85%,
      #440a67 100%
    );
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: cover;
  }

  /* Retrowave grid pattern */
  .retrowave-grid {
    background-size: 40px 40px;
    background-image: linear-gradient(
        to right,
        rgba(255, 79, 205, 0.1) 1px,
        transparent 1px
      ),
      linear-gradient(to bottom, rgba(255, 79, 205, 0.1) 1px, transparent 1px);
    perspective: 1000px;
    transform-origin: center bottom;
    transform: rotateX(60deg) translateY(100px);
    background-attachment: fixed;
    background-repeat: repeat;
  }

  /* Grid lines */
  .grid-lines {
    background-image: linear-gradient(
        90deg,
        rgba(123, 31, 162, 0.1) 1px,
        transparent 1px
      ),
      linear-gradient(0deg, rgba(123, 31, 162, 0.1) 1px, transparent 1px);
    background-size: 20px 20px;
    background-attachment: fixed;
    background-repeat: repeat;
  }

  /* Retrowave sun */
  .retrowave-sun {
    height: 100%; /* Changed from 60% to 100% to fill the entire background */
    background: radial-gradient(
      ellipse at center bottom,
      rgba(255, 23, 89, 0.6) 0%,
      rgba(188, 31, 210, 0.3) 50%,
      rgba(33, 12, 56, 0) 70%
    );
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-position: bottom center;
    background-size: 200% 100%;
  }

  /* Neon glowing accents */
  .neon-glows {
    background: radial-gradient(
        circle at 15% 50%,
        rgba(255, 23, 89, 0.3),
        transparent 35%
      ),
      radial-gradient(
        circle at 85% 30%,
        rgba(123, 31, 162, 0.3),
        transparent 30%
      ),
      radial-gradient(
        circle at 50% 80%,
        rgba(59, 130, 246, 0.3),
        transparent 40%
      );
    filter: blur(70px);
    background-attachment: fixed;
    background-repeat: no-repeat;
    background-size: cover;
    animation: pulse-neon 8s infinite alternate ease-in-out;
  }

  /* Animations */
  @keyframes pulse-neon {
    0% {
      opacity: 0.3;
      transform: scale(1);
    }
    100% {
      opacity: 0.5;
      transform: scale(1.05);
    }
  }
</style>
