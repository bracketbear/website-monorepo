---
import clsx from 'clsx';
import LayeredLayout, {
  Props as LayeredLayoutProps,
} from './LayeredLayout.astro';

interface Props extends LayeredLayoutProps {
  title: string;
  showHero?: boolean;
  contentWidth?: 'narrow' | 'wide';
}

const { title, showHero = true, contentWidth = 'wide', ...rest } = Astro.props;

const maxWidthClass = contentWidth === 'narrow' ? 'max-w-6xl' : '';
---

<LayeredLayout title={title} {...rest}>
  {showHero && (
    <!-- Dark Hero Section -->
    <div class="bg-brand-dark relative pb-8">
      <div class={clsx('container mx-auto px-6 py-12', {
        'max-w-6xl': contentWidth === 'narrow',
      })}>
        <div
          class="flex flex-col gap-8 md:flex-row md:items-end md:justify-between"
        >
          <div class="flex-1">
            <!-- Title Pills -->
            <div class="mb-4 flex items-center gap-4">
              <slot name="title-pills" />
            </div>
            
            <!-- Main Title -->
            <h1
              class="font-heading text-brand-orange mb-2 text-4xl leading-none uppercase md:text-6xl"
            >
              {title}
            </h1>
            
            <!-- Detail Blocks -->
            <div class="mt-8 flex  items-center gap-12 md:flex-row">
              <slot name="detail-blocks" />
            </div>
          </div>
          
          <!-- Cover Image/Art -->
          <div class="flex flex-shrink-0 flex-col items-end gap-2">
            <slot name="cover-image">
              <!-- Default placeholder -->
              <div
                class="border-brand-orange flex h-48 w-48 items-center justify-center border-2 bg-black"
              >
                <span class="text-brand-orange font-mono text-xs opacity-60"
                  >[Cover Image]</span
                >
              </div>
            </slot>
          </div>
        </div>
        
        <!-- Summary Block -->
        <slot name="summary" />
        
        <!-- Halftone Pattern -->
        <div
          class="pointer-events-none absolute bottom-0 left-0 flex w-full justify-center select-none"
        >
          <div
            class="h-4 w-2/3 bg-repeat-x"
            style="background-image: url('/patterns/halftone.svg'); opacity: 0.12;"
          >
          </div>
        </div>
      </div>
    </div>
  )}
  
  <!-- Main Content -->
  <div class="bg-primary/50 min-h-screen py-24">
    <div class={`container mx-auto ${maxWidthClass} px-6`}>
      <slot />
    </div>
  </div>
</LayeredLayout>
