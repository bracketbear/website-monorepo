---
import type { LayoutProps } from '../../types/layout';

import NavBar from '../components/NavBar.astro';
import Footer from '../components/Footer.astro';

interface Props extends LayoutProps {
  contactForm?: any; // Allow apps to pass their own ContactForm component
  metaDescription?: string;
  description?: string;
}

const {
  title,
  hideContactForm = false,
  hideFooter = false,
  hideNavigation = false,
  navigation,
  contactForm: ContactFormComponent,
  metaDescription,
  description,
} = Astro.props;

// Use description if provided, otherwise fall back to metaDescription
const finalMetaDescription = description || metaDescription;
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    {title && <title>{title}</title>}
    {
      finalMetaDescription && (
        <meta name="description" content={finalMetaDescription} />
      )
    }
  </head>
  <body
    class="bg-background text-foreground min-h-screen transition-colors duration-300"
  >
    {!hideNavigation && <NavBar config={navigation} class="relative z-50" />}
    <slot />
    {
      !hideContactForm && ContactFormComponent && (
        <ContactFormComponent class="bg-primary relative z-10 py-36" />
      )
    }
    {!hideFooter && <Footer config={navigation} />}
  </body>

  <style>
    html,
    body {
      margin: 0;
      width: 100%;
    }
  </style>
</html>
